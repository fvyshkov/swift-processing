{
    "lists": {},
    "forms": {},
    "js": {},
    "methods": {
        "getItemList": {
            "sql": {
                "sqlType": "query",
                "database": "default",
                "sql": "SELECT code, name_en, name_ru, name_combined, resource_url, attributes_table FROM process_type ORDER BY code"
            },
            "script": {}
        }
    },
    "references": {
        "default": {
            "form": {
                "style": {
                    "width": "1000px",
                    "height": "600px"
                },
                "columns": [
                    {
                        "title": "Code",
                        "field": "code",
                        "width": 150
                    },
                    {
                        "title": "Name (English)",
                        "field": "name_en",
                        "width": 200
                    },
                    {
                        "title": "Name (Russian)",
                        "field": "name_ru",
                        "width": 200
                    },
                    {
                        "title": "Combined Name",
                        "field": "name_combined",
                        "flex": 1
                    },
                    {
                        "title": "Resource URL",
                        "field": "resource_url",
                        "width": 300
                    },
                    {
                        "title": "Attributes Table",
                        "field": "attributes_table",
                        "width": 200
                    }
                ],
                "keyField": "code",
                "titleField": "name_combined",
                "method": "getItemList",
                "filter": {
                    "className": "vertical",
                    "$": {
                        "code": {
                            "label": "Code",
                            "control": "TextEdit"
                        },
                        "name": {
                            "label": "Name",
                            "control": "TextEdit"
                        }
                    }
                },
                "filterMethod": {
                    "sql": {
                        "sqlType": "script",
                        "database": "default"
                    },
                    "script": {
                        "py": "from apng_core.db import fetchall\n\nSQL = \"\"\"\n    SELECT code, name_en, name_ru, name_combined, resource_url\n    FROM process_type\n    WHERE 1=1\n\"\"\"\n\nparams = {}\n\nif parameters.get('code'):\n    SQL += \" AND UPPER(code) LIKE UPPER(:code)\"\n    params['code'] = f\"%{parameters['code']}%\"\n\nif parameters.get('name'):\n    SQL += \" AND (UPPER(name_en) LIKE UPPER(:name) OR UPPER(name_ru) LIKE UPPER(:name) OR UPPER(name_combined) LIKE UPPER(:name))\"\n    params['name'] = f\"%{parameters['name']}%\"\n\nSQL += \" ORDER BY code\"\n\nwith initDbSession(database='default').cursor() as c:\n    c.execute(SQL, params)\n    data = fetchall(c)\n"
                    }
                }
            },
            "method": {
                "sql": {
                    "sqlType": "query",
                    "database": "default",
                    "sql": "SELECT code, name_en, name_ru, name_combined, resource_url, attributes_table FROM process_type ORDER BY code",
                    "params": []
                },
                "script": {}
            }
        }
    }
}