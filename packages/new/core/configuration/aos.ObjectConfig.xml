<?xml version="1.0" ?>
<model id="aos.ObjectConfig" name="Object description">
	<task path="/aoa/ObjectTask">
		<p name="object" expression="'aos.ObjectConfig'"/>
		<p name="form" expression="'editConfigTask'"/>
		<p name="id" expression="objectId"/>
	</task>
	<description><![CDATA[description['code'] = obj.model_name
description['name'] = obj.name
description['file_name'] = '%s.%s' % (obj.model_name, 'xml')
description['file_path'] = 'configuration'
]]></description>
	<load><![CDATA[]]></load>
	<export><![CDATA[
file['data'] = obj.data.replace('\r', '')
]]></export>
	<import><![CDATA[from beflex.aos.models import ObjectConfig
import logging
logger = logging.getLogger('aos')
try:
    obj = ObjectConfig.objects.get(id=object_id)
    obj.data = file_data
except ObjectConfig.DoesNotExist:
    obj = ObjectConfig()
    obj.id = object_id
    obj.data = file_data
    obj.model_name = obj.parsed['id']
    
    try:
        old = ObjectConfig.objects.get(model_name=obj.model_name)
        old.delete()
    except ObjectConfig.DoesNotExist:
        None
        
obj._isImport = True
obj.save()
]]></import>
	<lookup><![CDATA[]]></lookup>
</model>
