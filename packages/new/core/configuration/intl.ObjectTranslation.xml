<?xml version="1.0" ?>
<model id="intl.ObjectTranslation" name="Translations">
	<task path="/aoa/ObjectTask">
		<p name="object" expression="'intl'"/>
		<p name="form" expression="'objectEditTask'"/>
		<p name="id" expression="objectId"/>
	</task>
	<description><![CDATA[code_name = '%s_%s_%s' % (obj.type, obj.code, obj.language)
description['code'] = code_name
description['name'] = code_name
description['file_name'] = '%s.%s' % (code_name, 'json')
description['file_path'] = 'intl'
description['attrs'] = {
    'type': obj.type,
    'code': obj.code,
    'language': obj.language,
}
]]></description>
	<export><![CDATA[import json
file['data'] = json.dumps(obj.data, indent=4, ensure_ascii=False).replace('\r', '')
]]></export>
	<import><![CDATA[from beflex.intl.models import ObjectTranslation

try:
    ot = ObjectTranslation.objects.get(
        type=object_attrs['type'],
        code=object_attrs['code'],
        language=object_attrs['language'],
    )
except ObjectTranslation.DoesNotExist:
    ot = ObjectTranslation()
    ot.type = object_attrs['type']
    ot.code = object_attrs['code']
    ot.language = object_attrs['language']
    
ot.data = json.loads(file_data)

ot._isImport = True
ot.save()

]]></import>
	<lookup><![CDATA[]]></lookup>
</model>
