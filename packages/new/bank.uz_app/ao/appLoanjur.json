{
    "lists": {},
    "forms": {
        "appEditForm": {
            "title": "Форма редактирования заявки",
            "className": "vertical",
            "$": {
                "app": {
                    "className": "vertical",
                    "$": {
                        "@clientInfo": {
                            "object": "app",
                            "form": "clientInfoJurForm",
                            "params": {
                                "product$": "mem.product",
                                "enableRenew$": "mem.state=='START' || mem.state===undefined"
                            },
                            "actions": {}
                        },
                        "@appInfo": {
                            "object": "appLoanjur",
                            "form": "appJurEditForm",
                            "params": {
                                "product$": "mem.product"
                            },
                            "readOnly$": "isReadOnly && (task.params.readOnly!==false)"
                        },
                        "@governmentDecision": {
                            "style": {
                                "width": "860px"
                            },
                            "object": "app",
                            "form": "governmentDecisionForm",
                            "visible$": "!!mem?.product?.options?.hasGovernmentDecision"
                        },
                        "@appExtInfo": {
                            "object$": "params?.appType?.appFormExt?.object",
                            "form$": "params?.appType?.appFormExt?.form",
                            "readOnly$": "isReadOnly && (task.params.readOnly!==false)",
                            "visible$": "!!params?.appType?.appFormExt?.form"
                        },
                        "@creditReport": {
                            "object": "app",
                            "form": "creditReportForm"
                        },
                        "@pledges": {
                            "object": "appPledge",
                            "form": "pledgesForm",
                            "params": {
                                "client$": "mem.client",
                                "coborrowers$": "mem.coborrowers",
                                "disableWithoutPledge$": "!!mem.product?.options?.typeOfObjectOfCredit"
                            }
                        },
                        "@afs": {
                            "object": "app",
                            "form": "afsProfileForm",
                            "readOnly$": "isReadOnly && (task.params.readOnly!==false)",
                            "visible$": "mem.afs?.description?.indicators?.length>0"
                        },
                        "@dossier": {
                            "object": "app",
                            "form": "dossierForm",
                            "params": {
                                "changepoint$": "mem.changepoint"
                            },
                            "visible$": "mem.dep_id && mem.id || false"
                        },
                        "@decisionInfo": {
                            "visible$": "!!mem.decisions",
                            "object": "app",
                            "form": "decisionInfoForm"
                        },
                        "@loanInfo": {
                            "visible$": "!!mem.app.importedLoanId || !!mem.dea",
                            "object": "loanapp",
                            "form": "loanInfoForm"
                        },
                        "@input_channel": {
                            "visible$": "!!mem.app.inputChannel",
                            "object": "app",
                            "form": "channelInfoForm"
                        }
                    },
                    "actions": {
                        "refreshApp": {
                            "js": ";"
                        },
                        "onCoborrowersChanged": {
                            "comment": "Обновление при изменени созаёмщиков, чтобы работал контроль по поручителям",
                            "js": ";"
                        }
                    }
                }
            }
        },
        "appJurEditForm": {
            "$": {
                "@app": {
                    "title": "Параметры кредита",
                    "titleClass": "navigated-title",
                    "className": "vertical navigated-content",
                    "$": {
                        "app": {
                            "className": "vertical",
                            "$": {
                                "@product": {
                                    "className": "horizontal",
                                    "$": {
                                        "productCode": {
                                            "label": "Продукт",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "TextEdit"
                                        },
                                        "productName": {
                                            "label": "",
                                            "style": {
                                                "width": "570px"
                                            },
                                            "control": "TextEdit"
                                        }
                                    },
                                    "readOnly": true
                                },
                                "@duration": {
                                    "$": {
                                        "@durationWithUnit": {
                                            "className": "horizontal",
                                            "visible$": "params.product?.options?.durationMethod=='duration' || !params.product?.options?.durationMethod",
                                            "required": true,
                                            "$": {
                                                "duration": {
                                                    "label": "Срок кредита",
                                                    "style": {
                                                        "width": "280px"
                                                    },
                                                    "control": "NumericField",
                                                    "controlProps": {
                                                        "numericProps": {
                                                            "minimumValue": 0,
                                                            "maximumValue": 99999
                                                        }
                                                    },
                                                    "validate": [
                                                        "context?.onValidateAppDuration?.()"
                                                    ]
                                                },
                                                "durationUnit": {
                                                    "label": null,
                                                    "style": {
                                                        "width": "280px"
                                                    },
                                                    "control": "SelectList",
                                                    "controlProps": {
                                                        "list": [
                                                            {
                                                                "value": "D",
                                                                "name": "День"
                                                            },
                                                            {
                                                                "value": "M",
                                                                "name": "Месяц"
                                                            },
                                                            {
                                                                "value": "Y",
                                                                "name": "Год"
                                                            }
                                                        ]
                                                    }
                                                }
                                            }
                                        },
                                        "@durationEndDate": {
                                            "visible$": "params.product?.options?.durationMethod=='endDate'",
                                            "$": {
                                                "durationEndDate": {
                                                    "label": "Дата окончания",
                                                    "style": {
                                                        "width": "280px"
                                                    },
                                                    "control": "DateEdit",
                                                    "required": true
                                                }
                                            }
                                        }
                                    }
                                },
                                "@amount": {
                                    "className": "horizontal",
                                    "$": {
                                        "amount": {
                                            "label": "Сумма кредита",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "CurrencyField",
                                            "readOnly$": "!params.enableAmount && isReadOnly",
                                            "required": true,
                                            "validate": [
                                                "params.product?.constraints?.minAmount != undefined && params.product.constraints.minAmount > mem.amount && {helperText: `Минимальная сумма кредита ${params.product.constraints.minAmount}`} || undefined",
                                                "params.product?.constraints?.maxAmount != undefined && params.product.constraints.maxAmount < mem.amount && {helperText: `Максимальная сумма кредита ${params.product.constraints.maxAmount}`} || undefined",
                                                "context?.onValidateAppAmount?.()"
                                            ],
                                            "actions": {
                                                "onChange": {
                                                    "name": "onChangeAmount"
                                                }
                                            }
                                        },
                                        "currency": {
                                            "label": "Валюта кредита",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "TextEdit",
                                            "readOnly": true
                                        },
                                        "interest": {
                                            "label": "Ставка",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "PercentField",
                                            "readOnly$": "isReadOnly || !params.product?.options?.interestEnabled",
                                            "required$": "params.product?.options?.interestEnabled",
                                            "validate": [
                                                "params.product.options.interestEnabled && params.product.parameters.L_PCNTDELTA?.minValue != undefined && params.product.parameters.L_PCNTDELTA.minValue > mem.interest && {helperText: `Ставка должна быть больше ${params.product.parameters.L_PCNTDELTA.minValue}`} || undefined",
                                                "params.product.options.interestEnabled && params.product.parameters.L_PCNTDELTA?.maxValue != undefined && params.product.parameters.L_PCNTDELTA.maxValue < mem.interest && {helperText: `Ставка должна быть меньше ${params.product.parameters.L_PCNTDELTA.maxValue}`} || undefined"
                                            ]
                                        }
                                    }
                                },
                                "@purposeOfLoan": {
                                    "className": "horizontal",
                                    "$": {
                                        "purposeOfLoan": {
                                            "label": "Цель кредита",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "ObjectReference",
                                            "controlProps": {
                                                "object": "purposeOfLoan",
                                                "reference": "default",
                                                "params": {
                                                    "productCode$": "mem?.productCode"
                                                }
                                            },
                                            "controlOpts": {
                                                "valueField": "code",
                                                "postfixFields": {
                                                    "Name": "name"
                                                }
                                            },
                                            "required": true
                                        },
                                        "purposeOfLoanName": {
                                            "style": {
                                                "width": "570px"
                                            },
                                            "control": "TextEdit",
                                            "readOnly": true
                                        }
                                    }
                                },
                                "@purposeOfLoan112": {
                                    "className": "horizontal",
                                    "$": {
                                        "purpose112OfLoan": {
                                            "label": "Цель кредита по классификатору",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "ObjectReference",
                                            "controlProps": {
                                                "object": "purposeOfLoan112",
                                                "reference": "default",
                                                "params": {
                                                    "productCode$": "mem?.productCode"
                                                }
                                            },
                                            "controlOpts": {
                                                "valueField": "code",
                                                "postfixFields": {
                                                    "Name": "name"
                                                }
                                            },
                                            "required": true
                                        },
                                        "purpose112OfLoanName": {
                                            "style": {
                                                "width": "570px"
                                            },
                                            "control": "TextEdit",
                                            "readOnly": true
                                        }
                                    }
                                },
                                "@typeOfLending": {
                                    "className": "horizontal",
                                    "$": {
                                        "typeOfLending": {
                                            "label": "Вид кредитования",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "ObjectReference",
                                            "controlProps": {
                                                "object": "typeOfLending",
                                                "reference": "default",
                                                "params": {
                                                    "productCode$": "mem?.productCode"
                                                }
                                            },
                                            "controlOpts": {
                                                "valueField": "code",
                                                "postfixFields": {
                                                    "Name": "name"
                                                }
                                            },
                                            "required": true
                                        },
                                        "typeOfLendingName": {
                                            "style": {
                                                "width": "570px"
                                            },
                                            "control": "TextEdit",
                                            "readOnly": true
                                        }
                                    }
                                },
                                "@typeOfLending110": {
                                    "className": "horizontal",
                                    "$": {
                                        "typeOfLending110": {
                                            "label": "Вид кредитования по классификатору",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "ObjectReference",
                                            "controlProps": {
                                                "object": "typeOfLending110",
                                                "reference": "default",
                                                "params": {
                                                    "productCode$": "mem?.productCode"
                                                }
                                            },
                                            "controlOpts": {
                                                "valueField": "code",
                                                "postfixFields": {
                                                    "Name": "name"
                                                }
                                            },
                                            "required": true
                                        },
                                        "typeOfLending110Name": {
                                            "style": {
                                                "width": "570px"
                                            },
                                            "control": "TextEdit",
                                            "readOnly": true
                                        }
                                    }
                                },
                                "@g1": {
                                    "className": "horizontal",
                                    "$": {
                                        "appId": {
                                            "label": "Уникальный номер заявки",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "TextEdit",
                                            "readOnly": true
                                        },
                                        "code": {
                                            "label": "Юр. номер заявки",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "TextEdit",
                                            "readOnly": true
                                        },
                                        "registrationDate": {
                                            "label": "Дата регистрации",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "DateEdit",
                                            "readOnly": true
                                        }
                                    }
                                },
                                "@legalAct": {
                                    "className": "horizontal",
                                    "$": {
                                        "legalAct": {
                                            "label": "Нормативно-правовой акт",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "ObjectReference",
                                            "controlProps": {
                                                "object": "legalAct",
                                                "reference": "default"
                                            },
                                            "controlOpts": {
                                                "valueField": "code",
                                                "postfixFields": {
                                                    "Name": "name"
                                                }
                                            },
                                            "required": true
                                        },
                                        "legalActName": {
                                            "style": {
                                                "width": "570px"
                                            },
                                            "control": "TextEdit",
                                            "readOnly": true
                                        }
                                    }
                                },
                                "@g2": {
                                    "className": "horizontal",
                                    "$": {
                                        "newObjectType": {
                                            "label": "Признак новообразования",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "ObjectSelectList",
                                            "controlProps": {
                                                "object": "bank_domain",
                                                "method": "getList",
                                                "params": {
                                                    "domain": "L_REQDSCROBJ"
                                                }
                                            },
                                            "controlOpts": {
                                                "translate": {
                                                    "value": "code",
                                                    "name": "name"
                                                }
                                            },
                                            "required": true
                                        },
                                        "existingWorkplaces": {
                                            "label": "Количество рабочих мест",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "NumericField",
                                            "controlProps": {
                                                "numericProps": {
                                                    "minimumValue": 0,
                                                    "maximumValue": 99999
                                                }
                                            },
                                            "required$": "params.product?.options?.workplacesNumRequired"
                                        },
                                        "workplaces_num": {
                                            "label": "Количество создаваемых рабочих мест",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "NumericField",
                                            "controlProps": {
                                                "numericProps": {
                                                    "minimumValue": 0,
                                                    "maximumValue": 99999
                                                }
                                            },
                                            "required$": "params.product?.options?.workplacesNumRequired"
                                        }
                                    }
                                },
                                "objectOfLoan": {
                                    "label": "Объект ссуды",
                                    "style": {
                                        "width": "860px"
                                    },
                                    "control": "TextEdit",
                                    "controlProps": {
                                        "multiline": true,
                                        "minRows": 2
                                    },
                                    "required": true
                                },
                                "@region": {
                                    "className": "horizontal",
                                    "$": {
                                        "region": {
                                            "label": "Область подачи заявки",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "TextEdit"
                                        },
                                        "regionName": {
                                            "style": {
                                                "width": "570px"
                                            },
                                            "control": "TextEdit"
                                        }
                                    },
                                    "readOnly": true
                                },
                                "@district": {
                                    "className": "horizontal",
                                    "$": {
                                        "district": {
                                            "label": "Район подачи заявки",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "TextEdit"
                                        },
                                        "districtName": {
                                            "style": {
                                                "width": "570px"
                                            },
                                            "control": "TextEdit"
                                        }
                                    },
                                    "readOnly": true
                                },
                                "@productParameters": {
                                    "style": {
                                        "width": "860px"
                                    },
                                    "object": "app",
                                    "form": "productParametersForm"
                                }
                            },
                            "actions": {
                                "onChangeAmount": {
                                    "js": "if (!params.product?.options?.interestEnabled && !params.disableRecalcInterest){mem.interest=null; context.needCalculateInterest=true;}"
                                }
                            }
                        }
                    }
                }
            }
        },
        "appEditTrancheForm": {
            "title": "Форма редактирования заявки",
            "className": "vertical",
            "$": {
                "app": {
                    "className": "vertical",
                    "$": {
                        "@clientInfo": {
                            "object": "app",
                            "form": "clientInfoJurForm",
                            "params": {
                                "product$": "mem.product",
                                "enableRenew$": "mem.state=='START' || mem.state===undefined"
                            },
                            "actions": {}
                        },
                        "@lineInfo": {
                            "object": "appLoanjur",
                            "form": "lineInfoForm",
                            "readOnly": true
                        },
                        "@LoanInfo": {
                            "object": "appLoanjur",
                            "form": "appJurEditForm",
                            "params": {
                                "product$": "mem.product",
                                "disableRecalcInterest": true
                            },
                            "readOnly$": "isReadOnly && (task.params.readOnly!==false)"
                        },
                        "@governmentDecision": {
                            "style": {
                                "width": "860px"
                            },
                            "object": "app",
                            "form": "governmentDecisionForm",
                            "visible$": "!!mem?.product?.options?.hasGovernmentDecision"
                        },
                        "@creditReport": {
                            "object": "app",
                            "form": "creditReportForm"
                        },
                        "@pledges": {
                            "object": "appPledge",
                            "form": "pledgesForm",
                            "params": {
                                "client$": "mem.client",
                                "coborrowers$": "mem.coborrowers",
                                "disableWithoutPledge$": "!!mem.product.options.typeOfObjectOfCredit"
                            }
                        },
                        "@afs": {
                            "object": "app",
                            "form": "afsProfileForm",
                            "readOnly$": "isReadOnly && (task.params.readOnly!==false)",
                            "visible$": "mem.afs?.description?.indicators?.length>0"
                        },
                        "@dossier": {
                            "object": "app",
                            "form": "dossierForm",
                            "params": {
                                "changepoint$": "mem.changepoint"
                            },
                            "visible$": "mem.dep_id && mem.id || false"
                        }
                    },
                    "actions": {
                        "refreshApp": {
                            "js": ";"
                        },
                        "onCoborrowersChanged": {
                            "comment": "Обновление при изменени созаёмщиков, чтобы работал контроль по поручителям",
                            "js": ";"
                        },
                        "onElementCreated": [
                            {
                                "js": "context.onValidateAppAmount = ()=>mem.app.amount>mem.line.OST && {helperText: `Доступный остаток линии ${formatters.currency(mem.line.OST)}`} || undefined"
                            },
                            {
                                "js": "context.onValidateAppDuration = ()=>{let dEnd = new Date(mem.line.TODATE); let dTranche = new Date(user.operday); dTranche = applyDuration(dTranche, mem.app.duration, mem.app.durationUnit); if (dTranche>dEnd)return {helperText: `Дата завершения транша ${formatters.date(dTranche)} больше даты завершения линии ${formatters.date(dEnd)}`}}"
                            }
                        ]
                    }
                }
            },
            "actions": {}
        },
        "lineInfoForm": {
            "title": "Информация о кредитной линии",
            "$": {
                "@lineInfo": {
                    "title": "Креитная линия",
                    "className": "vertical navigated-content",
                    "titleClass": "navigated-title",
                    "$": {
                        "line": {
                            "className": "vertical",
                            "$": {
                                "@product": {
                                    "className": "horizontal",
                                    "$": {
                                        "DCL_CODE": {
                                            "label": "Продукт",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "TextEdit"
                                        },
                                        "DCL_NAME": {
                                            "label": "",
                                            "style": {
                                                "width": "570px"
                                            },
                                            "control": "TextEdit"
                                        }
                                    },
                                    "readOnly": true
                                },
                                "@dea": {
                                    "className": "horizontal",
                                    "$": {
                                        "CODE": {
                                            "label": "Номер",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "TextEdit"
                                        },
                                        "FROMDATE": {
                                            "label": "Дата начала",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "DateEdit"
                                        },
                                        "TODATE": {
                                            "label": "Дата окончания",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "DateEdit"
                                        }
                                    }
                                },
                                "@limit": {
                                    "className": "horizontal",
                                    "$": {
                                        "SUMLIMPAY": {
                                            "label": "Лимит выдачи",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "CurrencyField"
                                        },
                                        "AMOUNT": {
                                            "label": "Лимит задолженности",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "CurrencyField"
                                        },
                                        "VAL_CODE": {
                                            "label": "Валюта",
                                            "style": {
                                                "width": "280px"
                                            },
                                            "control": "TextEdit"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "methods": {},
    "references": {},
    "js": {}
}