<workflow id="APP_CHECK_INPUT" name="Контроль ввода заявки">
    <script id="f3dcd82c-497d-4c97-8cf1-9216c53c3d81" name="Стадия рассмотрения">
        <![CDATA[from apng_core.aoa.services import execObjectMethod

ok = pv.get('objectKey')
kv = ok.split(':')
pk = kv[1].split(',')
pv['dep_id'] = int(pk[0])
pv['id'] = int(pk[1])

execObjectMethod({
    'object': 'app', 'method': 'setState',
    'params': {
        'dep_id': pv['dep_id'],
        'id': pv['id'],
        'stage': 'CHECK',
    }
})

]]>
    </script>
    <call id="8be711fa-9cd0-4f2a-97ed-26cafb0be001" name="Контроль досье" call="&apos;APP_CHECK_DOSSIER&apos;" result_from="result" result_to="result">
        <p name="objectKey" expression="process_vars.get(&apos;objectKey&apos;)"/>
        <p name="req" expression="process_vars.get(&apos;req&apos;)"/>
    </call>
    <split id="2cb99eae-78ca-4b95-8cb9-be1b57909eee" name="Контроль пройден">
        <condition id="653a99da-ba39-4ebf-a2e9-44e406cb965b" name="Да" expression="process_vars[&apos;result&apos;][&apos;status&apos;] == &apos;accept&apos;"/>
        <condition id="d34e27a8-a00c-44ff-9d3e-03434fe8aebb" name="Нет" expression="process_vars[&apos;result&apos;][&apos;status&apos;] != &apos;accept&apos;">
            <terminate id="4c3ded05-132f-4c57-9331-533801ea0199" name="Завершение"/>
        </condition>
    </split>
    <call id="b6cce3a8-5722-4085-bb21-3b3134d1a1e3" name="Контроль обеспечения" call="&apos;APP_CHECK_PLEDGE&apos;" result_from="result" result_to="result">
        <p name="objectKey" expression="process_vars.get(&apos;objectKey&apos;)"/>
        <p name="req" expression="process_vars.get(&apos;req&apos;)"/>
    </call>
</workflow>