<?xml version="1.0" ?>
<model id="aoa.DataObject" name="Прикладные данные">
	<description><![CDATA[description['code'] = obj.code
description['name'] = obj.name
description['file_name'] = '%s_%s.%s' % (obj.type, obj.code, 'json')
description['file_path'] = 'dataobject'
description['attrs'] = {
    'type': obj.type,
    'code': obj.code,
    'name': obj.name,
}

]]></description>
	<export><![CDATA[
import json
file['data'] = json.dumps(obj.data, indent=4, ensure_ascii=False).replace('\r', '')
]]></export>
	<import><![CDATA[from apng_core.aoa.models import DataObject
import json
import logging
logger = logging.getLogger('aos')

try:
    obj = DataObject.objects.get(id=object_id)
except DataObject.DoesNotExist:
    try:
        obj = DataObject.objects.get(type=object_attrs['type'], code=object_attrs['code'])
    except DataObject.DoesNotExist:
        obj = DataObject()
        obj.id = object_id
        obj.type = object_attrs['type']

obj.data = json.loads(file_data)
obj.code = object_attrs['code']
obj.name = object_attrs['name']
obj._isImport = True
obj.save()
]]></import>
	<lookup><![CDATA[]]></lookup>
</model>
